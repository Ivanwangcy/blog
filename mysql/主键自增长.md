#修改旧项目主键方案
## 数据库更新主键为自增长
```sql
-- 查询数据库中所有的表和主键（拼接成   创建序列[主键自增]的sql）

SELECT  
CONCAT('ALTER TABLE ',tbs.TABLE_NAME,' MODIFY ',cls.COLUMN_NAME,' INTEGER AUTO_INCREMENT;')
				
FROM INFORMATION_SCHEMA.TABLES AS tbs
INNER JOIN INFORMATION_SCHEMA.TABLE_CONSTRAINTS AS cts
ON tbs.TABLE_SCHEMA = '数据库名' AND tbs.table_type = "BASE TABLE" 
AND cts.TABLE_SCHEMA =tbs.TABLE_SCHEMA AND cts.TABLE_NAME = tbs.TABLE_NAME 
AND cts.CONSTRAINT_TYPE = 'PRIMARY KEY'
INNER JOIN INFORMATION_SCHEMA.KEY_COLUMN_USAGE AS cls
ON cls.TABLE_SCHEMA = cts.TABLE_SCHEMA AND cls.TABLE_NAME = cts.TABLE_NAME 
AND cls.CONSTRAINT_NAME =cts.CONSTRAINT_NAME
```
## MyBatis, Mapper文件新增自增长接口 并 返回插入的ID

```xml
<insert id="insert" parameterType="com.gdzy.icourseschool.pojo.ConfigRegisterMode">
		    insert into 
			ConfigRegisterMode(configRegisterModeId,registerMode) 
			values(#{configRegisterModeId},#{registerMode})
		</insert>
		<insert id="insertAutokey" useGeneratedKeys="true" keyProperty="configRegisterModeId" 
		parameterType="com.gdzy.icourseschool.pojo.ConfigRegisterMode">
		    insert into 
			ConfigRegisterMode(registerMode) 
			values(#{registerMode})
		</insert>
```
