# Taro 项目实战

* 设计稿使用 750，像素自动转换 rpx，如果尺寸是 375 需 X 2
* 使用 npm run dev:weapp 自动监听文件变化，如果显示不正确、没有热更新，增加了新模块等需要重新执行命令；
* 小程序样式和H5不一样，不是全局共享的，组件样式不会污染全局；


## 自定义组件如果使用外部传人的样式

参考：[Taro编写微信小程序时，自定义组件样式引入后不生效](https://segmentfault.com/a/1190000020365328) 

```js
允许支持全局样式
static options = {
    addGlobalClass: true
  }
  
// or 添加额外的classname
export default class CustomComp extends Component {
  static externalClasses = ['custom-class']

  render () {
    return <View className="custom-class">这段文本的颜色由组件外的 class 决定</View>
  }
}  
```

## 小程序接收外部入参

```js
  componentWillMount() {
    console.log('====================================');
    console.log(this.$router.params);
    console.log('====================================');

    // 从其他小程序跳过来时 referrerInfo 字段获取参数
    let {referrerInfo} = this.$router.params;

    console.log('====================================');
    console.log('referrerInfo', referrerInfo);
    console.log('====================================');
  }
```

## 自定义接口运行环境

```js
    "dev:weapp": "npm run build:weapp -- --watch",
    "pre:weapp": "npm run build:weapp -- --watch -- --env prepare",
    "prod:weapp": "taro build --type weapp --env production",
   
```

根据 NODE_ENV 制定不同的配置项

```js
module.exports = function (merge) {
  if (process.env.NODE_ENV === 'development') {
    return merge({}, config, require('./dev'))
  } else if (process.env.NODE_ENV === 'prepare') {
    return merge({}, config, require('./pre'))
  }
  return merge({}, config, require('./prod'))
}
```

## Taro 中得图片资源加载

```js
// 导入图片的两种方式

// 本地图片资源会打入包中
import icon from '../../iamges/icon.png'

<Image src={icon} />
<Image src={require('../../iamges/icon.png')} />

// css 样式需要使用网络图片

  background-image: url(http://xx.xx.com/xx.png);

```
